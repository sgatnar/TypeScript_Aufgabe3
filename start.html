<!DOCTYPE html>
<html>
<head>
    <title>Team-Mitglieder</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/knockout/3.4.2/knockout-min.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
        }

        h1 {
            text-align: center;
        }

        .container {
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            margin-top: 30px;
        }

        .dropdown {
            margin-bottom: 20px;
        }

        .team-member {
            text-align: center;
        }

        .team-member img {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            margin-bottom: 10px;
        }

        .confirm-button {
            background-color: #4CAF50;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
        }
    </style>
</head>
<body>
    <h1>Team-Mitglieder</h1>

    <div class="container">
        <div class="dropdown">
            <select data-bind="options: teamMembers, optionsText: 'name', value: selectedTeamMember"></select>
        </div>
        <div class="team-member" data-bind="with: selectedTeamMember">
            <img data-bind="attr: { src: image_url }">
            <h2 data-bind="text: name"></h2>
        </div>
        <button class="confirm-button" onclick="navigateToVisitenkarte()">Bestätigen</button>
    </div>

    <script>
        function TeamMember(name, image_url) {
            this.name = name;
            this.image_url = image_url;
        }

        function TeamViewModel() {
            var self = this;
            self.teamMembers = ko.observableArray([]);

            // Laden der Daten aus der JSON-Datei
            fetch('Person.json')
                .then(response => response.json())
                .then(data => {
                    var teamMembersData = data.person.map(person => new TeamMember(
                        person.name,
                        person.image_url
                    ));
                    self.teamMembers(teamMembersData);
                    self.selectedTeamMember(teamMembersData[0]); // Standardmäßig die erste Person auswählen
                })
                .catch(error => {
                    console.error('Fehler beim Laden der Daten:', error);
                });

            self.selectedTeamMember = ko.observable(null);
        }

        // ViewModel
        var viewModel = new TeamViewModel();
        ko.applyBindings(viewModel);

        function navigateToVisitenkarte() {
            var selectedPerson = viewModel.selectedTeamMember();
            if (selectedPerson) {
                var url = 'visitenkarte.html?name=' + encodeURIComponent(selectedPerson.name) +
                          '&image_url=' + encodeURIComponent(selectedPerson.image_url);
                window.location.href = url;
            }
        }
    </script>
</body>
</html>